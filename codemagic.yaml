workflows:
  android-release:
    name: EMFAD Android Release Build
    max_build_duration: 180
    instance_type: mac_mini_m2
    
    # Entfernt: flutter_sdk (da dies eine native Android-App ist)
    
    # Korrekte Trigger-Struktur (Codemagic erkennt automatisch)
    # Entfernt: triggers (Codemagic erkennt Branch automatisch)

    script:
      - checkout
      - name: Setup JDK
        script: |
          echo "Java-Version pr端fen"
          java -version
          javac -version
      - name: Gradle-Build ausf端hren
        script: |
          ./gradlew assembleRelease \
            -Pandroid.enableJetifier=true \
            -Pandroid.useAndroidX=true
      # Entfernt: upload_app_store (erfordert Apple-Zertifikate, die nicht im Repository liegen)

    artifacts:
      - app/build/outputs/apk/release/*.apk  # Nur String-Pfad f端r APK
      - app/build/reports/  # Nur String-Pfad f端r Berichte
